2025-12-09 12:09:24.817 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT 1
2025-12-09 12:09:24.881 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-12-09 12:09:24.976 +07:00 [INF] Executed DbCommand (92ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-12-09 12:09:25.071 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-12-09 12:09:25.082 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT 1
2025-12-09 12:09:25.088 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-09 12:09:25.170 +07:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-09 12:09:25.182 +07:00 [INF] Applying migration '20251209050912_UpdateSomething'.
2025-12-09 12:09:25.278 +07:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
ALTER TABLE [Users] ADD [AvatarUrl] nvarchar(max) NULL;
2025-12-09 12:09:25.286 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
ALTER TABLE [Posts] ADD [ImageUrl] nvarchar(max) NULL;
2025-12-09 12:09:25.294 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
ALTER TABLE [Comments] ADD [AttachmentUrl] nvarchar(max) NULL;
2025-12-09 12:09:25.317 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251209050912_UpdateSomething', N'9.0.9');
2025-12-09 12:09:25.329 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-12-09 12:09:41.889 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT 1
2025-12-09 12:09:41.970 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-12-09 12:09:42.012 +07:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-12-09 12:09:42.140 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-12-09 12:09:42.159 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT 1
2025-12-09 12:09:42.164 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-09 12:09:42.184 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-09 12:09:42.201 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-12-09 12:09:42.210 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-12-09 12:09:42.603 +07:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 12:09:42.632 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Posts] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 12:09:42.755 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Comments] AS [c]
        WHERE [c].[ParentCommentId] IS NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 12:09:42.778 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Comments] AS [c]
        WHERE [c].[ParentCommentId] IS NOT NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 12:09:43.075 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-09 12:09:43.355 +07:00 [INF] Now listening on: http://localhost:5165
2025-12-09 12:09:43.361 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-09 12:09:43.364 +07:00 [INF] Hosting environment: Development
2025-12-09 12:09:43.365 +07:00 [INF] Content root path: C:\Users\Admin\RiderProjects\MiniProject\WebApplication1
2025-12-09 12:09:43.450 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/index.html - null null
2025-12-09 12:09:43.726 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/index.html - 200 null text/html;charset=utf-8 277.206ms
2025-12-09 12:09:44.179 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - null null
2025-12-09 12:09:44.308 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Failed to generate Operation for action - WebApplication1.Presentation.Controllers.UploadController.UploadAvatar (WebApplication1). See inner exception
 ---> Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Error reading parameter(s) for action WebApplication1.Presentation.Controllers.UploadController.UploadAvatar (WebApplication1) as [FromForm] attribute used with IFormFile. Please refer to https://github.com/domaindrivendev/Swashbuckle.AspNetCore#handle-forms-and-file-uploads for more information
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateParameters(ApiDescription apiDescription, SchemaRepository schemaRespository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperation(ApiDescription apiDescription, SchemaRepository schemaRepository)
   --- End of inner exception stack trace ---
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperation(ApiDescription apiDescription, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-09 12:09:44.336 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 155.8847ms
2025-12-09 12:12:51.102 +07:00 [INF] Application is shutting down...
2025-12-09 13:58:27.897 +07:00 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT 1
2025-12-09 13:58:28.012 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-12-09 13:58:28.202 +07:00 [INF] Executed DbCommand (180ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-12-09 13:58:28.389 +07:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-12-09 13:58:28.433 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT 1
2025-12-09 13:58:28.450 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-09 13:58:28.551 +07:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-09 13:58:28.582 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-12-09 13:58:28.597 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-12-09 13:58:29.043 +07:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 13:58:29.060 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Posts] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 13:58:29.130 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Comments] AS [c]
        WHERE [c].[ParentCommentId] IS NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 13:58:29.156 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Comments] AS [c]
        WHERE [c].[ParentCommentId] IS NOT NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 13:58:29.361 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-09 13:58:29.553 +07:00 [INF] Now listening on: http://localhost:5165
2025-12-09 13:58:29.560 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-09 13:58:29.562 +07:00 [INF] Hosting environment: Development
2025-12-09 13:58:29.564 +07:00 [INF] Content root path: C:\Users\Admin\RiderProjects\MiniProject\WebApplication1
2025-12-09 13:58:34.301 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/index.html - null null
2025-12-09 13:58:34.554 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/index.html - 200 null text/html;charset=utf-8 258.6755ms
2025-12-09 13:58:34.784 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - null null
2025-12-09 13:58:34.952 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 167.5648ms
2025-12-09 14:00:00.701 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - multipart/form-data; boundary=----WebKitFormBoundaryRANsRKz2OiZPZPOX 814751
2025-12-09 14:00:00.752 +07:00 [INF] No CORS policy found for the specified request.
2025-12-09 14:00:00.755 +07:00 [WRN] Failed to determine the https port for redirect.
2025-12-09 14:00:00.883 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The AuthorizationPolicy named: 'User' was not found.
   at Microsoft.AspNetCore.Authorization.AuthorizationPolicy.CombineAsync(IAuthorizationPolicyProvider policyProvider, IEnumerable`1 authorizeData, IEnumerable`1 policies)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-09 14:00:00.936 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - 500 null text/plain; charset=utf-8 236.0953ms
2025-12-09 14:04:18.840 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/index.html - null null
2025-12-09 14:04:18.883 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/index.html - 200 null text/html;charset=utf-8 44.2399ms
2025-12-09 14:04:19.388 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - null null
2025-12-09 14:04:19.454 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 66.0873ms
2025-12-09 14:04:30.362 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - multipart/form-data; boundary=----WebKitFormBoundaryf0BzJP016FTT06ad 814751
2025-12-09 14:04:30.377 +07:00 [INF] No CORS policy found for the specified request.
2025-12-09 14:04:30.409 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The AuthorizationPolicy named: 'User' was not found.
   at Microsoft.AspNetCore.Authorization.AuthorizationPolicy.CombineAsync(IAuthorizationPolicyProvider policyProvider, IEnumerable`1 authorizeData, IEnumerable`1 policies)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-09 14:04:30.428 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - 500 null text/plain; charset=utf-8 66.199ms
2025-12-09 14:05:21.138 +07:00 [INF] Application is shutting down...
2025-12-09 14:06:20.456 +07:00 [INF] Executed DbCommand (57ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT 1
2025-12-09 14:06:20.623 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-12-09 14:06:20.842 +07:00 [INF] Executed DbCommand (210ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-12-09 14:06:21.205 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-12-09 14:06:21.232 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT 1
2025-12-09 14:06:21.239 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-09 14:06:21.329 +07:00 [INF] Executed DbCommand (70ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-09 14:06:21.353 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-12-09 14:06:21.361 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-12-09 14:06:22.293 +07:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:06:22.320 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Posts] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:06:22.409 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Comments] AS [c]
        WHERE [c].[ParentCommentId] IS NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:06:22.429 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Comments] AS [c]
        WHERE [c].[ParentCommentId] IS NOT NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:06:22.673 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-09 14:06:22.972 +07:00 [INF] Now listening on: http://localhost:5165
2025-12-09 14:06:22.984 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-09 14:06:22.986 +07:00 [INF] Hosting environment: Development
2025-12-09 14:06:22.988 +07:00 [INF] Content root path: C:\Users\Admin\RiderProjects\MiniProject\WebApplication1
2025-12-09 14:06:23.249 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/index.html - null null
2025-12-09 14:06:23.712 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/index.html - 200 null text/html;charset=utf-8 463.9585ms
2025-12-09 14:06:24.298 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - null null
2025-12-09 14:06:24.452 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 153.726ms
2025-12-09 14:06:34.519 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - multipart/form-data; boundary=----WebKitFormBoundarypWLhG3OBhaJjGQv3 55661
2025-12-09 14:06:34.545 +07:00 [INF] No CORS policy found for the specified request.
2025-12-09 14:06:34.550 +07:00 [WRN] Failed to determine the https port for redirect.
2025-12-09 14:06:34.611 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2025-12-09 14:06:34.622 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-12-09 14:06:34.625 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - 401 0 null 105.5815ms
2025-12-09 14:09:08.111 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - multipart/form-data; boundary=----WebKitFormBoundaryBHXNnxlUhwSHUwOC 55661
2025-12-09 14:09:08.135 +07:00 [INF] No CORS policy found for the specified request.
2025-12-09 14:09:08.143 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2025-12-09 14:09:08.144 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-12-09 14:09:08.147 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - 401 0 null 35.3255ms
2025-12-09 14:09:11.355 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/index.html - null null
2025-12-09 14:09:11.372 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/index.html - 200 null text/html;charset=utf-8 16.811ms
2025-12-09 14:09:11.807 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - null null
2025-12-09 14:09:11.852 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 44.9633ms
2025-12-09 14:09:22.044 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - multipart/form-data; boundary=----WebKitFormBoundaryiXO2oNceBm9j1VQj 1178831
2025-12-09 14:09:22.094 +07:00 [INF] No CORS policy found for the specified request.
2025-12-09 14:09:22.127 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2025-12-09 14:09:22.140 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-12-09 14:09:22.176 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - 401 0 null 132.4411ms
2025-12-09 14:09:22.391 +07:00 [INF] Connection id "0HNHMU5R3L26K", Request id "0HNHMU5R3L26K:00000001": the application completed without reading the entire request body.
2025-12-09 14:09:27.647 +07:00 [INF] Application is shutting down...
2025-12-09 14:09:40.413 +07:00 [INF] Executed DbCommand (238ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT 1
2025-12-09 14:09:40.550 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-12-09 14:09:40.803 +07:00 [INF] Executed DbCommand (237ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-12-09 14:09:43.979 +07:00 [INF] Executed DbCommand (464ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-12-09 14:09:44.029 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT 1
2025-12-09 14:09:44.038 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-09 14:09:45.372 +07:00 [INF] Executed DbCommand (1,284ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-09 14:09:45.407 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-12-09 14:09:45.439 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-12-09 14:09:46.007 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:09:46.059 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Posts] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:09:46.142 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Comments] AS [c]
        WHERE [c].[ParentCommentId] IS NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:09:46.160 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Comments] AS [c]
        WHERE [c].[ParentCommentId] IS NOT NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:09:46.401 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-09 14:09:46.621 +07:00 [INF] Now listening on: http://localhost:5165
2025-12-09 14:09:46.627 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-09 14:09:46.629 +07:00 [INF] Hosting environment: Development
2025-12-09 14:09:46.631 +07:00 [INF] Content root path: C:\Users\Admin\RiderProjects\MiniProject\WebApplication1
2025-12-09 14:09:46.853 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/index.html - null null
2025-12-09 14:09:47.108 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/index.html - 200 null text/html;charset=utf-8 256.7913ms
2025-12-09 14:09:47.367 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - null null
2025-12-09 14:09:47.518 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 150.8882ms
2025-12-09 14:09:58.023 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - multipart/form-data; boundary=----WebKitFormBoundaryFnROhVhIh577XHqf 814751
2025-12-09 14:09:58.066 +07:00 [WRN] Failed to determine the https port for redirect.
2025-12-09 14:09:58.069 +07:00 [INF] CORS policy execution successful.
2025-12-09 14:09:58.176 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2025-12-09 14:09:58.193 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-12-09 14:09:58.201 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - 401 0 null 178.4305ms
2025-12-09 14:10:03.222 +07:00 [INF] Application is shutting down...
2025-12-09 14:15:54.854 +07:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT 1
2025-12-09 14:15:54.945 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-12-09 14:15:55.062 +07:00 [INF] Executed DbCommand (113ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-12-09 14:15:55.187 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-12-09 14:15:55.202 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT 1
2025-12-09 14:15:55.209 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-09 14:15:55.275 +07:00 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-09 14:15:55.291 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-12-09 14:15:55.305 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-12-09 14:15:55.657 +07:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:15:55.674 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Posts] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:15:55.740 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Comments] AS [c]
        WHERE [c].[ParentCommentId] IS NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:15:55.754 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Comments] AS [c]
        WHERE [c].[ParentCommentId] IS NOT NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:15:55.929 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-09 14:15:56.083 +07:00 [INF] Now listening on: http://localhost:5165
2025-12-09 14:15:56.089 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-09 14:15:56.092 +07:00 [INF] Hosting environment: Development
2025-12-09 14:15:56.093 +07:00 [INF] Content root path: C:\Users\Admin\RiderProjects\MiniProject\WebApplication1
2025-12-09 14:15:57.959 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/index.html - null null
2025-12-09 14:15:58.344 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/index.html - 200 null text/html;charset=utf-8 390.1071ms
2025-12-09 14:15:58.743 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - null null
2025-12-09 14:15:58.932 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 189.5459ms
2025-12-09 14:16:14.355 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - multipart/form-data; boundary=----WebKitFormBoundaryNMWAVAXOUZjSAh5s 814751
2025-12-09 14:16:14.372 +07:00 [WRN] Failed to determine the https port for redirect.
2025-12-09 14:16:14.376 +07:00 [INF] CORS policy execution successful.
2025-12-09 14:16:14.433 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2025-12-09 14:16:14.439 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-12-09 14:16:14.441 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - 401 0 null 85.7546ms
2025-12-09 14:17:37.980 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/.well-known/appspecific/com.chrome.devtools.json - null null
2025-12-09 14:17:38.179 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 211.3903ms
2025-12-09 14:17:38.199 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5165/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-12-09 14:18:17.795 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/index.html - null null
2025-12-09 14:18:17.833 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/index.html - 200 null text/html;charset=utf-8 37.6266ms
2025-12-09 14:18:17.947 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/.well-known/appspecific/com.chrome.devtools.json - null null
2025-12-09 14:18:17.963 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 16.0613ms
2025-12-09 14:18:17.971 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5165/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-12-09 14:18:18.440 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - null null
2025-12-09 14:18:18.641 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 201.4559ms
2025-12-09 14:18:27.214 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - multipart/form-data; boundary=----WebKitFormBoundaryNO9q8EvZhh9CKvBp 814751
2025-12-09 14:18:27.235 +07:00 [INF] CORS policy execution successful.
2025-12-09 14:18:27.249 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2025-12-09 14:18:27.252 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-12-09 14:18:27.254 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - 401 0 null 40.2294ms
2025-12-09 14:19:55.111 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/index.html - null null
2025-12-09 14:19:55.125 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/index.html - 200 null text/html;charset=utf-8 14.0905ms
2025-12-09 14:19:55.244 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - null null
2025-12-09 14:19:55.289 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 44.7268ms
2025-12-09 14:20:00.798 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/.well-known/appspecific/com.chrome.devtools.json - null null
2025-12-09 14:20:00.820 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 22.3814ms
2025-12-09 14:20:00.855 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5165/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-12-09 14:20:06.845 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/index.html - null null
2025-12-09 14:20:06.853 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/index.html - 200 null text/html;charset=utf-8 7.099ms
2025-12-09 14:20:06.917 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/.well-known/appspecific/com.chrome.devtools.json - null null
2025-12-09 14:20:06.929 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 11.7392ms
2025-12-09 14:20:06.943 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5165/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-12-09 14:20:07.362 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - null null
2025-12-09 14:20:07.471 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 108.3469ms
2025-12-09 14:20:17.541 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - multipart/form-data; boundary=----WebKitFormBoundaryCzrBzBRttw1aQBsv 814751
2025-12-09 14:20:17.670 +07:00 [INF] CORS policy execution successful.
2025-12-09 14:20:17.711 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2025-12-09 14:20:17.761 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-12-09 14:20:17.825 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - 401 0 null 289.1453ms
2025-12-09 14:21:12.539 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/index.html - null null
2025-12-09 14:21:12.552 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/index.html - 200 null text/html;charset=utf-8 12.8975ms
2025-12-09 14:21:12.712 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - null null
2025-12-09 14:21:12.755 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 42.228ms
2025-12-09 14:22:14.343 +07:00 [INF] Application is shutting down...
2025-12-09 14:23:16.151 +07:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT 1
2025-12-09 14:23:16.278 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-12-09 14:23:16.381 +07:00 [INF] Executed DbCommand (95ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-12-09 14:23:16.551 +07:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-12-09 14:23:16.592 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT 1
2025-12-09 14:23:16.600 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-09 14:23:16.667 +07:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-09 14:23:16.687 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-12-09 14:23:16.710 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-12-09 14:23:17.372 +07:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:23:17.405 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Posts] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:23:17.610 +07:00 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Comments] AS [c]
        WHERE [c].[ParentCommentId] IS NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:23:17.629 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Comments] AS [c]
        WHERE [c].[ParentCommentId] IS NOT NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:23:17.973 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-09 14:23:18.814 +07:00 [INF] Now listening on: http://localhost:5165
2025-12-09 14:23:18.822 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-09 14:23:18.832 +07:00 [INF] Hosting environment: Development
2025-12-09 14:23:18.836 +07:00 [INF] Content root path: C:\Users\Admin\RiderProjects\MiniProject\WebApplication1
2025-12-09 14:23:19.365 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/index.html - null null
2025-12-09 14:23:19.780 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/index.html - 200 null text/html;charset=utf-8 418.1187ms
2025-12-09 14:23:20.395 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - null null
2025-12-09 14:23:20.614 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 218.8705ms
2025-12-09 14:23:37.196 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5165/api/auth/login - application/json 49
2025-12-09 14:23:37.232 +07:00 [WRN] Failed to determine the https port for redirect.
2025-12-09 14:23:37.240 +07:00 [INF] CORS policy execution successful.
2025-12-09 14:23:37.344 +07:00 [INF] Executing endpoint 'WebApplication1.Presentation.Controllers.AuthController.Login (WebApplication1)'
2025-12-09 14:23:37.394 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebApplication1.Application.DTOs.LoginRequestDto) on controller WebApplication1.Presentation.Controllers.AuthController (WebApplication1).
2025-12-09 14:23:37.667 +07:00 [INF] Executing action method WebApplication1.Presentation.Controllers.AuthController.Login (WebApplication1) - Validation state: "Valid"
2025-12-09 14:23:38.014 +07:00 [INF] Executed DbCommand (115ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='600']
SELECT TOP(1) [u].[Id], [u].[AvatarUrl], [u].[Name], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-12-09 14:23:38.528 +07:00 [INF] Executed DbCommand (83ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='600']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [RefreshToken] = @p0, [RefreshTokenExpiryTime] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-12-09 14:23:38.580 +07:00 [INF] Executed action method WebApplication1.Presentation.Controllers.AuthController.Login (WebApplication1), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 885.9827ms.
2025-12-09 14:23:38.613 +07:00 [INF] Executing OkObjectResult, writing value of type 'WebApplication1.Application.DTOs.LoginResponseDto'.
2025-12-09 14:23:38.699 +07:00 [INF] Executed action WebApplication1.Presentation.Controllers.AuthController.Login (WebApplication1) in 1292.6462ms
2025-12-09 14:23:38.708 +07:00 [INF] Executed endpoint 'WebApplication1.Presentation.Controllers.AuthController.Login (WebApplication1)'
2025-12-09 14:23:38.765 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5165/api/auth/login - 200 null application/json; charset=utf-8 1568.819ms
2025-12-09 14:24:18.572 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - multipart/form-data; boundary=----WebKitFormBoundaryhb9Venk7dYhFWZGN 814751
2025-12-09 14:24:18.591 +07:00 [INF] CORS policy execution successful.
2025-12-09 14:24:18.705 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-12-09 14:24:18.712 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-12-09 14:24:18.719 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2025-12-09 14:24:18.731 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-12-09 14:24:18.733 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - 401 0 null 160.3535ms
2025-12-09 14:24:57.773 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - multipart/form-data; boundary=----WebKitFormBoundaryOy804J0ABwRng0yD 814751
2025-12-09 14:24:57.782 +07:00 [INF] CORS policy execution successful.
2025-12-09 14:24:57.789 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.ValidateAndGetOutputSize(String inputString, Int32 offset, Int32 length)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-12-09 14:24:57.795 +07:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-12-09 14:24:57.799 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2025-12-09 14:24:57.802 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-12-09 14:24:57.805 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - 401 0 null 31.9836ms
2025-12-09 14:25:54.628 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - multipart/form-data; boundary=----WebKitFormBoundarybmm7KChWsBysv48p 814751
2025-12-09 14:25:54.656 +07:00 [INF] CORS policy execution successful.
2025-12-09 14:25:54.666 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.ArgumentOutOfRangeException: Specified argument was out of the range of valid values. (Parameter 'IDX10820: Invalid character found in Base64UrlEncoding. Character: '32', Encoding: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.')
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode(String input, Int32 offset, Int32 length, Byte[] output)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-12-09 14:25:54.678 +07:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-12-09 14:25:54.683 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2025-12-09 14:25:54.685 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-12-09 14:25:54.690 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - 401 0 null 62.6258ms
2025-12-09 14:26:05.820 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/index.html - null null
2025-12-09 14:26:06.105 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/index.html - 200 null text/html;charset=utf-8 284.9991ms
2025-12-09 14:26:06.639 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - null null
2025-12-09 14:26:07.274 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 635.523ms
2025-12-09 14:26:23.433 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - multipart/form-data; boundary=----WebKitFormBoundaryQwyQ9iXY1dm4ESXc 814751
2025-12-09 14:26:23.441 +07:00 [INF] CORS policy execution successful.
2025-12-09 14:26:23.443 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.ArgumentOutOfRangeException: Specified argument was out of the range of valid values. (Parameter 'IDX10820: Invalid character found in Base64UrlEncoding. Character: '32', Encoding: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.')
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode(String input, Int32 offset, Int32 length, Byte[] output)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-12-09 14:26:23.451 +07:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-12-09 14:26:23.452 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User)
2025-12-09 14:26:23.454 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-12-09 14:26:23.456 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - 401 0 null 22.4051ms
2025-12-09 14:29:16.779 +07:00 [INF] Application is shutting down...
2025-12-09 14:29:41.534 +07:00 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT 1
2025-12-09 14:29:41.649 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-12-09 14:29:41.776 +07:00 [INF] Executed DbCommand (120ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-12-09 14:29:41.969 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-12-09 14:29:41.986 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT 1
2025-12-09 14:29:41.993 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-09 14:29:42.075 +07:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-09 14:29:42.094 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-12-09 14:29:42.123 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-12-09 14:29:42.781 +07:00 [INF] Executed DbCommand (60ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:29:42.803 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Posts] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:29:43.060 +07:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Comments] AS [c]
        WHERE [c].[ParentCommentId] IS NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:29:43.079 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Comments] AS [c]
        WHERE [c].[ParentCommentId] IS NOT NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:29:43.380 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-09 14:29:43.729 +07:00 [INF] Now listening on: http://localhost:5165
2025-12-09 14:29:43.760 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-09 14:29:43.765 +07:00 [INF] Hosting environment: Development
2025-12-09 14:29:43.782 +07:00 [INF] Content root path: C:\Users\Admin\RiderProjects\MiniProject\WebApplication1
2025-12-09 14:29:44.029 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/index.html - null null
2025-12-09 14:29:44.522 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/index.html - 200 null text/html;charset=utf-8 497.0391ms
2025-12-09 14:29:45.055 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - null null
2025-12-09 14:29:45.249 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 194.764ms
2025-12-09 14:42:02.197 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/.well-known/appspecific/com.chrome.devtools.json - null null
2025-12-09 14:42:02.420 +07:00 [WRN] Failed to determine the https port for redirect.
2025-12-09 14:42:02.730 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 539.5549ms
2025-12-09 14:42:02.758 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5165/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-12-09 14:42:11.098 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/index.html - null null
2025-12-09 14:42:11.132 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/index.html - 200 null text/html;charset=utf-8 34.3159ms
2025-12-09 14:42:11.232 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/.well-known/appspecific/com.chrome.devtools.json - null null
2025-12-09 14:42:11.285 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 52.3304ms
2025-12-09 14:42:11.300 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5165/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-12-09 14:42:11.889 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - null null
2025-12-09 14:42:12.104 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 215.533ms
2025-12-09 14:42:23.599 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - multipart/form-data; boundary=----WebKitFormBoundary6RsYLLr13VBYFoL3 1178831
2025-12-09 14:42:23.690 +07:00 [INF] CORS policy execution successful.
2025-12-09 14:42:23.720 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The AuthorizationPolicy named: 'User, Admin' was not found.
   at Microsoft.AspNetCore.Authorization.AuthorizationPolicy.CombineAsync(IAuthorizationPolicyProvider policyProvider, IEnumerable`1 authorizeData, IEnumerable`1 policies)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-09 14:42:23.802 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - 500 null text/plain; charset=utf-8 202.3154ms
2025-12-09 14:42:23.833 +07:00 [INF] Connection id "0HNHMUISI0O3P", Request id "0HNHMUISI0O3P:00000001": the application completed without reading the entire request body.
2025-12-09 14:43:13.686 +07:00 [INF] Application is shutting down...
2025-12-09 14:43:31.613 +07:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT 1
2025-12-09 14:43:31.748 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-12-09 14:43:31.927 +07:00 [INF] Executed DbCommand (172ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-12-09 14:43:32.064 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-12-09 14:43:32.079 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT 1
2025-12-09 14:43:32.086 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-09 14:43:32.162 +07:00 [INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-09 14:43:32.185 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-12-09 14:43:32.204 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-12-09 14:43:32.601 +07:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:43:32.635 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Posts] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:43:32.898 +07:00 [INF] Executed DbCommand (65ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Comments] AS [c]
        WHERE [c].[ParentCommentId] IS NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:43:32.933 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Comments] AS [c]
        WHERE [c].[ParentCommentId] IS NOT NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:43:33.102 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-09 14:43:33.295 +07:00 [INF] Now listening on: http://localhost:5165
2025-12-09 14:43:33.304 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-09 14:43:33.307 +07:00 [INF] Hosting environment: Development
2025-12-09 14:43:33.308 +07:00 [INF] Content root path: C:\Users\Admin\RiderProjects\MiniProject\WebApplication1
2025-12-09 14:43:33.745 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/index.html - null null
2025-12-09 14:43:34.037 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/index.html - 200 null text/html;charset=utf-8 294.5875ms
2025-12-09 14:43:34.374 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - null null
2025-12-09 14:43:34.770 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 395.6585ms
2025-12-09 14:44:05.924 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/.well-known/appspecific/com.chrome.devtools.json - null null
2025-12-09 14:44:06.123 +07:00 [WRN] Failed to determine the https port for redirect.
2025-12-09 14:44:06.399 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 477.2815ms
2025-12-09 14:44:06.465 +07:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5165/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-12-09 14:44:30.694 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5165/api/auth/login - application/json 49
2025-12-09 14:44:30.759 +07:00 [INF] CORS policy execution successful.
2025-12-09 14:44:30.770 +07:00 [INF] Executing endpoint 'WebApplication1.Presentation.Controllers.AuthController.Login (WebApplication1)'
2025-12-09 14:44:30.837 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebApplication1.Application.DTOs.LoginRequestDto) on controller WebApplication1.Presentation.Controllers.AuthController (WebApplication1).
2025-12-09 14:44:31.072 +07:00 [INF] Executing action method WebApplication1.Presentation.Controllers.AuthController.Login (WebApplication1) - Validation state: "Valid"
2025-12-09 14:44:31.548 +07:00 [INF] Executed DbCommand (196ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='600']
SELECT TOP(1) [u].[Id], [u].[AvatarUrl], [u].[Name], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-12-09 14:44:31.912 +07:00 [INF] Executed DbCommand (42ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='600']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [RefreshToken] = @p0, [RefreshTokenExpiryTime] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-12-09 14:44:31.945 +07:00 [INF] Executed action method WebApplication1.Presentation.Controllers.AuthController.Login (WebApplication1), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 863.4135ms.
2025-12-09 14:44:31.968 +07:00 [INF] Executing OkObjectResult, writing value of type 'WebApplication1.Application.DTOs.LoginResponseDto'.
2025-12-09 14:44:32.015 +07:00 [INF] Executed action WebApplication1.Presentation.Controllers.AuthController.Login (WebApplication1) in 1166.9663ms
2025-12-09 14:44:32.020 +07:00 [INF] Executed endpoint 'WebApplication1.Presentation.Controllers.AuthController.Login (WebApplication1)'
2025-12-09 14:44:32.043 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5165/api/auth/login - 200 null application/json; charset=utf-8 1348.4176ms
2025-12-09 14:44:57.528 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - multipart/form-data; boundary=----WebKitFormBoundarySs4fS8BM0EF5Hd71 1178831
2025-12-09 14:44:57.555 +07:00 [INF] CORS policy execution successful.
2025-12-09 14:44:57.587 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenMalformedException: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
 ---> System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.ArgumentOutOfRangeException: Specified argument was out of the range of valid values. (Parameter 'IDX10820: Invalid character found in Base64UrlEncoding. Character: '32', Encoding: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.')
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode(String input, Int32 offset, Int32 length, Byte[] output)
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoding.Decode[T](String input, Int32 offset, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(String rawString, Int32 startIndex, Int32 length, Func`3 action)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(String encodedJson)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
   --- End of inner exception stack trace ---
2025-12-09 14:44:57.630 +07:00 [INF] Bearer was not authenticated. Failure message: IDX14100: JWT is not well formed, there are no dots (.).
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
2025-12-09 14:44:57.637 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The AuthorizationPolicy named: 'User,Admin' was not found.
   at Microsoft.AspNetCore.Authorization.AuthorizationPolicy.CombineAsync(IAuthorizationPolicyProvider policyProvider, IEnumerable`1 authorizeData, IEnumerable`1 policies)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-09 14:44:57.655 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - 500 null text/plain; charset=utf-8 127.5189ms
2025-12-09 14:44:57.666 +07:00 [INF] Connection id "0HNHMUQJR48M8", Request id "0HNHMUQJR48M8:00000001": the application completed without reading the entire request body.
2025-12-09 14:45:17.761 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/api/uploads/avatar - null null
2025-12-09 14:45:17.785 +07:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2025-12-09 14:45:17.804 +07:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2025-12-09 14:45:17.822 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/api/uploads/avatar - 405 0 null 60.8247ms
2025-12-09 14:49:05.838 +07:00 [INF] Application is shutting down...
2025-12-09 14:49:18.613 +07:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT 1
2025-12-09 14:49:18.709 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-12-09 14:49:18.830 +07:00 [INF] Executed DbCommand (113ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-12-09 14:49:18.966 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-12-09 14:49:18.986 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT 1
2025-12-09 14:49:18.991 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-09 14:49:19.064 +07:00 [INF] Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-09 14:49:19.083 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-12-09 14:49:19.100 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-12-09 14:49:19.495 +07:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:49:19.525 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Posts] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:49:19.587 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Comments] AS [c]
        WHERE [c].[ParentCommentId] IS NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:49:19.596 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Comments] AS [c]
        WHERE [c].[ParentCommentId] IS NOT NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:49:19.816 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-09 14:49:20.000 +07:00 [INF] Now listening on: http://localhost:5165
2025-12-09 14:49:20.005 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-09 14:49:20.008 +07:00 [INF] Hosting environment: Development
2025-12-09 14:49:20.010 +07:00 [INF] Content root path: C:\Users\Admin\RiderProjects\MiniProject\WebApplication1
2025-12-09 14:49:20.840 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/index.html - null null
2025-12-09 14:49:21.149 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/index.html - 200 null text/html;charset=utf-8 310.6616ms
2025-12-09 14:49:21.710 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - null null
2025-12-09 14:49:22.292 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 582.1739ms
2025-12-09 14:49:40.426 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5165/api/auth/login - application/json 49
2025-12-09 14:49:40.452 +07:00 [WRN] Failed to determine the https port for redirect.
2025-12-09 14:49:40.454 +07:00 [INF] CORS policy execution successful.
2025-12-09 14:49:40.514 +07:00 [INF] Executing endpoint 'WebApplication1.Presentation.Controllers.AuthController.Login (WebApplication1)'
2025-12-09 14:49:40.562 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebApplication1.Application.DTOs.LoginRequestDto) on controller WebApplication1.Presentation.Controllers.AuthController (WebApplication1).
2025-12-09 14:49:40.720 +07:00 [INF] Executing action method WebApplication1.Presentation.Controllers.AuthController.Login (WebApplication1) - Validation state: "Valid"
2025-12-09 14:49:41.035 +07:00 [INF] Executed DbCommand (123ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='600']
SELECT TOP(1) [u].[Id], [u].[AvatarUrl], [u].[Name], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-12-09 14:49:41.412 +07:00 [INF] Executed DbCommand (48ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='600']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [RefreshToken] = @p0, [RefreshTokenExpiryTime] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-12-09 14:49:41.447 +07:00 [INF] Executed action method WebApplication1.Presentation.Controllers.AuthController.Login (WebApplication1), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 719.0383ms.
2025-12-09 14:49:41.489 +07:00 [INF] Executing OkObjectResult, writing value of type 'WebApplication1.Application.DTOs.LoginResponseDto'.
2025-12-09 14:49:41.564 +07:00 [INF] Executed action WebApplication1.Presentation.Controllers.AuthController.Login (WebApplication1) in 989.6941ms
2025-12-09 14:49:41.567 +07:00 [INF] Executed endpoint 'WebApplication1.Presentation.Controllers.AuthController.Login (WebApplication1)'
2025-12-09 14:49:41.587 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5165/api/auth/login - 200 null application/json; charset=utf-8 1160.2786ms
2025-12-09 14:50:02.670 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - multipart/form-data; boundary=----WebKitFormBoundaryy3ryzVBp8ksC1PBM 814751
2025-12-09 14:50:02.697 +07:00 [INF] CORS policy execution successful.
2025-12-09 14:50:02.846 +07:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignature(JsonWebToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateSignatureAndIssuerSecurityKey(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-12-09 14:50:02.852 +07:00 [INF] Bearer was not authenticated. Failure message: IDX10503: Signature validation failed. Token does not have a kid. Keys tried: '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. Number of keys in TokenValidationParameters: '1'. 
Number of keys in Configuration: '0'. 
Exceptions caught:
 '[PII of type 'System.Text.StringBuilder' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
token: '[PII of type 'Microsoft.IdentityModel.JsonWebTokens.JsonWebToken' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. See https://aka.ms/IDX10503 for details.
2025-12-09 14:50:02.861 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (User|Admin)
2025-12-09 14:50:02.873 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-12-09 14:50:02.876 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - 401 0 null 205.7882ms
2025-12-09 14:51:31.649 +07:00 [INF] Application is shutting down...
2025-12-09 14:51:46.366 +07:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT 1
2025-12-09 14:51:46.479 +07:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-12-09 14:51:46.527 +07:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-12-09 14:51:46.675 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-12-09 14:51:46.697 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT 1
2025-12-09 14:51:46.703 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-12-09 14:51:46.758 +07:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-12-09 14:51:46.776 +07:00 [INF] No migrations were applied. The database is already up to date.
2025-12-09 14:51:46.784 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-12-09 14:51:47.277 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:51:47.300 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Posts] AS [p]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:51:47.377 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Comments] AS [c]
        WHERE [c].[ParentCommentId] IS NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:51:47.393 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='600']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Comments] AS [c]
        WHERE [c].[ParentCommentId] IS NOT NULL) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-09 14:51:47.609 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-09 14:51:47.788 +07:00 [INF] Now listening on: http://localhost:5165
2025-12-09 14:51:47.794 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-09 14:51:47.797 +07:00 [INF] Hosting environment: Development
2025-12-09 14:51:47.798 +07:00 [INF] Content root path: C:\Users\Admin\RiderProjects\MiniProject\WebApplication1
2025-12-09 14:51:49.111 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/index.html - null null
2025-12-09 14:51:50.272 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/index.html - 200 null text/html;charset=utf-8 1165.3112ms
2025-12-09 14:51:50.465 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - null null
2025-12-09 14:51:50.700 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5165/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 233.9518ms
2025-12-09 14:52:03.514 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - multipart/form-data; boundary=----WebKitFormBoundarymoNZzmbR13S8QD2F 814751
2025-12-09 14:52:03.528 +07:00 [WRN] Failed to determine the https port for redirect.
2025-12-09 14:52:03.531 +07:00 [INF] CORS policy execution successful.
2025-12-09 14:52:03.601 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin)
2025-12-09 14:52:03.613 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-12-09 14:52:03.616 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - 401 0 null 102.3847ms
2025-12-09 14:52:21.062 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5165/api/auth/login - application/json 49
2025-12-09 14:52:21.090 +07:00 [INF] CORS policy execution successful.
2025-12-09 14:52:21.101 +07:00 [INF] Executing endpoint 'WebApplication1.Presentation.Controllers.AuthController.Login (WebApplication1)'
2025-12-09 14:52:21.142 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(WebApplication1.Application.DTOs.LoginRequestDto) on controller WebApplication1.Presentation.Controllers.AuthController (WebApplication1).
2025-12-09 14:52:21.269 +07:00 [INF] Executing action method WebApplication1.Presentation.Controllers.AuthController.Login (WebApplication1) - Validation state: "Valid"
2025-12-09 14:52:26.341 +07:00 [INF] Executed DbCommand (4,917ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='600']
SELECT TOP(1) [u].[Id], [u].[AvatarUrl], [u].[Name], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2025-12-09 14:52:26.642 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@p2='?' (DbType = Guid), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='600']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [RefreshToken] = @p0, [RefreshTokenExpiryTime] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-12-09 14:52:26.672 +07:00 [INF] Executed action method WebApplication1.Presentation.Controllers.AuthController.Login (WebApplication1), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 5394.0395ms.
2025-12-09 14:52:26.694 +07:00 [INF] Executing OkObjectResult, writing value of type 'WebApplication1.Application.DTOs.LoginResponseDto'.
2025-12-09 14:52:26.741 +07:00 [INF] Executed action WebApplication1.Presentation.Controllers.AuthController.Login (WebApplication1) in 5589.9852ms
2025-12-09 14:52:26.745 +07:00 [INF] Executed endpoint 'WebApplication1.Presentation.Controllers.AuthController.Login (WebApplication1)'
2025-12-09 14:52:26.759 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5165/api/auth/login - 200 null application/json; charset=utf-8 5696.7095ms
2025-12-09 14:52:53.463 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - multipart/form-data; boundary=----WebKitFormBoundarykt77VrKAR12gruNv 55661
2025-12-09 14:52:53.485 +07:00 [INF] CORS policy execution successful.
2025-12-09 14:52:53.570 +07:00 [INF] Executing endpoint 'WebApplication1.Presentation.Controllers.UploadController.UploadAvatar (WebApplication1)'
2025-12-09 14:52:53.585 +07:00 [INF] Route matched with {action = "UploadAvatar", controller = "Upload"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UploadAvatar(WebApplication1.Application.DTOs.Upload.UploadAvatarDto, Microsoft.AspNetCore.Hosting.IWebHostEnvironment, WebApplication1.Application.Interfaces.IUploadService.IUploadService) on controller WebApplication1.Presentation.Controllers.UploadController (WebApplication1).
2025-12-09 14:52:53.683 +07:00 [INF] Executing action method WebApplication1.Presentation.Controllers.UploadController.UploadAvatar (WebApplication1) - Validation state: "Valid"
2025-12-09 14:52:53.899 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__userId_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='600']
SELECT TOP(1) [u].[Id], [u].[AvatarUrl], [u].[Name], [u].[PasswordHash], [u].[RefreshToken], [u].[RefreshTokenExpiryTime], [u].[Role], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Id] = @__userId_0
2025-12-09 14:52:53.916 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='600']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [AvatarUrl] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2025-12-09 14:52:53.922 +07:00 [INF] Executed action method WebApplication1.Presentation.Controllers.UploadController.UploadAvatar (WebApplication1), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 195.2865ms.
2025-12-09 14:52:53.935 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-09 14:52:54.008 +07:00 [INF] Executed action WebApplication1.Presentation.Controllers.UploadController.UploadAvatar (WebApplication1) in 418.2794ms
2025-12-09 14:52:54.015 +07:00 [INF] Executed endpoint 'WebApplication1.Presentation.Controllers.UploadController.UploadAvatar (WebApplication1)'
2025-12-09 14:52:54.024 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5165/api/uploads/avatar - 200 null application/json; charset=utf-8 560.5165ms
2025-12-09 14:53:01.511 +07:00 [INF] Application is shutting down...
